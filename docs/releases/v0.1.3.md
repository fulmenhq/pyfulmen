# PyFulmen v0.1.3 Release Notes

**Release Date**: October 17, 2025
**Release Type**: Feature Release - Extension Modules & Documentation Polish
**Milestone**: Pathfinder & ASCII Helpers Complete, All Core Modules Stable

---

## üéØ Release Overview

PyFulmen v0.1.3 adds two production-ready **extension modules** for filesystem discovery and console formatting, completing the foundation library's essential utilities. This release also establishes **comprehensive ecosystem ADR tracking** to document architectural alignment across the Fulmen ecosystem.

**Key Capabilities**:

- **Pathfinder**: Safe filesystem discovery with glob patterns, path traversal protection, and proper pathlib usage
- **ASCII Helpers**: Unicode-aware box drawing with terminal-specific width overrides and three-layer configuration
- **Ecosystem ADR Tracking**: Comprehensive adoption status tracking for cross-language architectural decisions
- **Documentation Polish**: Updated module statuses, test counts, and roadmap alignment
- **Enterprise Quality**: 615 tests passing (95 new tests), 90%+ coverage across all modules

This release prioritizes:

- **Developer Experience**: Idiomatic Python filesystem operations with modern pathlib APIs
- **Cross-Language Parity**: 100% behavioral alignment with gofulmen pathfinder and ASCII implementations
- **Architectural Transparency**: Complete tracking of ecosystem ADR adoption status
- **Production Readiness**: All core modules now stable, extension modules tested and documented

---

## ‚ú® Major Features

### Pathfinder Extension Module

Safe filesystem discovery with glob patterns, designed to avoid the brittleness found in raw doublestar/glob usage.

#### Core Features

**Location**: `src/pyfulmen/pathfinder/`

- **Path Safety Validation**: Traversal attack prevention with proper normalization
- **Glob Pattern Support**: Recursive `**` patterns with proper pathlib integration
- **Flexible Discovery**: Include/exclude patterns, max depth, hidden file handling
- **Streaming Support**: Progress callbacks and error handlers
- **Schema Validation**: Optional input/output validation against Crucible schemas

#### Path Safety

**Location**: `src/pyfulmen/pathfinder/safety.py`

```python
def validate_path(path: str) -> None:
    """
    Validate path safety with traversal attack prevention.

    Checks:
    - Path traversal attempts (.. sequences)
    - Empty/invalid paths
    - Proper normalization using os.path

    Raises:
    - PathTraversalError: Path contains traversal attempts
    - InvalidPathError: Path is empty or invalid
    """
```

**Key Design Decision**: Check for `..` in the ORIGINAL path BEFORE normalization, since `os.path.normpath` resolves `..` and would hide traversal attempts.

#### Finder API

**Location**: `src/pyfulmen/pathfinder/finder.py`

```python
from pyfulmen.pathfinder import Finder, FindQuery

# Create finder
finder = Finder()

# Basic file discovery
query = FindQuery(
    root="/path/to/search",
    include=["**/*.py", "**/*.md"],
    exclude=["**/test_*.py"],
    max_depth=3,
    include_hidden=False
)

results = finder.find_files(query)

for result in results:
    print(f"{result.relative_path} -> {result.source_path}")
```

**Convenience Methods**:

```python
# Find Go files
go_files = finder.find_go_files(root="/path/to/project")

# Find configuration files
config_files = finder.find_config_files(root="/path/to/project")

# Find schema files
schema_files = finder.find_schema_files(root="/path/to/project")

# Find by extension
ts_files = finder.find_by_extension(root="/path/to/project", exts=["ts", "tsx"])
```

#### Proper pathlib Usage

**Critical Implementation Detail**: All path operations use `pathlib.Path` instead of string manipulation to avoid bugs found in the Go implementation.

```python
# Normalize root path using pathlib
root_path = Path(query.root).resolve()

# Use pathlib for glob operations
if "**" in pattern:
    matches = root_path.rglob(pattern.replace("**/", ""))
else:
    matches = root_path.glob(pattern)

# Get relative paths using pathlib
try:
    rel_path = abs_match.relative_to(root_path)
except ValueError:
    continue  # Path not relative to root
```

**Rationale**: Python's `pathlib` provides robust path operations that handle edge cases, platform differences, and normalization correctly. This addresses brittleness found in Go's string-based path manipulation.

#### Configuration & Models

**Location**: `src/pyfulmen/pathfinder/models.py`

- `FindQuery`: Search parameters (inherits from `FulmenDataModel`)
- `PathResult`: Discovery results (inherits from `FulmenDataModel`)
- `FinderConfig`: Finder configuration (inherits from `FulmenConfigModel`)

**Foundation Model Integration**: All models use Fulmen foundation models for consistent Pydantic configuration and validation.

#### Testing

**Coverage**: 47 comprehensive tests, 90%+ coverage

- Path safety validation tests (10 tests)
- Finder discovery tests (25 tests)
- Convenience method tests (8 tests)
- Edge case tests (4 tests)

**Location**: `tests/unit/pathfinder/`

**Parity**: 100% gofulmen pathfinder behavioral compliance

### ASCII Helpers Extension Module

Unicode-aware console formatting with terminal-specific width overrides and three-layer configuration.

#### Core Features

**Location**: `src/pyfulmen/ascii/`

- **Unicode Width Calculation**: wcwidth-based display width calculation
- **Terminal Override Support**: Per-terminal character width adjustments
- **Box Drawing**: Full box character support with proper width handling
- **Three-Layer Configuration**: Defaults ‚Üí User overrides ‚Üí BYOC
- **Auto-Detection**: Automatic terminal type detection via `TERM_PROGRAM`

#### String Width Calculation

**Location**: `src/pyfulmen/ascii/ascii.py`

```python
from pyfulmen.ascii import string_width

# Calculate display width (handles Unicode, emojis, CJK)
width = string_width("Hello ‰∏ñÁïå")  # Returns actual terminal width
width = string_width("Box: ‚îå‚îÄ‚îê")    # Accounts for box drawing characters

# Pad to width
padded = pad_right("Hello", 10)    # "Hello     "
padded = pad_left("Hello", 10)     # "     Hello"
padded = pad_center("Hello", 10)   # "  Hello   "

# Truncate to width
truncated = truncate("Very long string", 10, ellipsis="...")
```

**wcwidth Integration**: Uses the `wcwidth` library for accurate Unicode width calculation, with terminal-specific overrides applied on top.

#### Terminal Configuration

**Location**: `src/pyfulmen/ascii/terminal.py`

**Three-Layer Pattern**:

1. **Layer 1 (Defaults)**: Embedded terminal overrides from Crucible SSOT
2. **Layer 2 (User Overrides)**: `~/.config/fulmen/terminal-overrides.yaml`
3. **Layer 3 (BYOC)**: Runtime configuration via API (future)

**Auto-Detection**:

```python
# Automatically detects terminal from TERM_PROGRAM environment variable
terminal_config = get_terminal_config()  # Returns config for current terminal

# Supported terminals:
# - vscode (Visual Studio Code)
# - Apple_Terminal (macOS Terminal.app)
# - iTerm.app (iTerm2)
# - Generic fallback for unsupported terminals
```

**Terminal Override Example**:

```yaml
# ~/.config/fulmen/terminal-overrides.yaml
profiles:
  - terminalType: "vscode"
    terminalName: "Visual Studio Code"
    overrides:
      "‚îÄ": 1 # Horizontal line should be width 1
      "‚îÇ": 1 # Vertical line should be width 1
      "‚îå": 1 # Top-left corner
      "‚îî": 1 # Bottom-left corner
```

**Rationale**: Different terminals render box-drawing characters with different widths. VSCode, for example, may render some characters as width-2 when they should be width-1, causing alignment issues. Terminal-specific overrides fix this.

#### Box Drawing

**Location**: `src/pyfulmen/ascii/ascii.py`

```python
from pyfulmen.ascii import draw_box, BoxStyle

# Draw a simple box
box = draw_box(width=20, height=5, style=BoxStyle.SINGLE)
print(box)
# Output:
# ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
# ‚îÇ                  ‚îÇ
# ‚îÇ                  ‚îÇ
# ‚îÇ                  ‚îÇ
# ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

# Draw box with content
box = draw_box(
    width=30,
    height=7,
    style=BoxStyle.DOUBLE,
    title="Status",
    content=["Line 1", "Line 2", "Line 3"]
)
```

**Box Styles**:

- `SINGLE`: Single-line box drawing (‚îå‚îÄ‚îê‚îÇ‚îî‚îò)
- `DOUBLE`: Double-line box drawing (‚ïî‚ïê‚ïó‚ïë‚ïö‚ïù)
- `ROUNDED`: Rounded corners (‚ï≠‚îÄ‚ïÆ‚îÇ‚ï∞‚ïØ)
- `BOLD`: Bold/heavy lines (‚îè‚îÅ‚îì‚îÉ‚îó‚îõ)

#### Testing

**Coverage**: 48 comprehensive tests, 90%+ coverage

- String width calculation tests (15 tests)
- Padding/truncation tests (12 tests)
- Box drawing tests (10 tests)
- Terminal configuration tests (11 tests)

**Location**: `tests/unit/ascii/`

**Parity**: 100% gofulmen ASCII implementation alignment

### Ecosystem ADR Adoption Tracking

Comprehensive tracking of PyFulmen's implementation status for ecosystem-wide architectural decisions.

#### Adoption Status Document

**Location**: `docs/development/adr/ecosystem-adoption-status.md`

**Adoption Status Levels**:

- **not-applicable** (0): Does not apply to this library
- **deferred** (5): Postponed with documented rationale
- **planned** (10): Implementation planned but not started
- **in-progress** (20): Active implementation underway
- **implemented** (30): Fully implemented, ready for validation
- **verified** (40): Implemented and validated through tests/production use

**Tracked Ecosystem ADRs**:

| Ecosystem ADR | Title                             | Status               | Test Evidence                                  |
| ------------- | --------------------------------- | -------------------- | ---------------------------------------------- |
| ADR-0001      | Two-Tier ADR System               | **verified** (40)    | 4 local + 5 ecosystem ADRs tracked             |
| ADR-0002      | Triple-Index Catalog Strategy     | **verified** (40)    | 227 foundry tests, gofulmen parity verified    |
| ADR-0003      | Progressive Logging Profiles      | **verified** (40)    | 200+ logging tests, all 4 profiles implemented |
| ADR-0004      | Schema-Driven Config Hydration    | **implemented** (30) | Layer 1 & 2 complete, Layer 3 partial          |
| ADR-0005      | CamelCase to Language Conventions | **verified** (40)    | Field aliases working throughout               |

#### Module Maturity Tracking

**Coverage Summary**:

| Module | Core/Extension | Test Count | Coverage | Ecosystem ADRs | Status |
|--------|---------------|------------|----------|----------------|---------| | Foundry | Core | 227 | 95% | ADR-0002, ADR-0005 | ‚úÖ Stable |
| Logging | Core | 200+ | 96-100% | ADR-0003 | ‚úÖ Stable |
| Config | Core | 30+ | 90%+ | ADR-0004, ADR-0005 | ‚úÖ Stable |
| Crucible Shim | Core | 20+ | 95%+ | ADR-0001 | ‚úÖ Stable |
| Schema | Core | 10+ | 90%+ | ADR-0004 | ‚úÖ Stable |
| Pathfinder | Extension | 47 | 90%+ | - | ‚úÖ Stable |
| ASCII | Extension | 48 | 90%+ | ADR-0004 | ‚úÖ Stable |

**Total Tests**: 615 passing (up from 520 in v0.1.2)

#### Documentation Updates

**Updated Documents**:

- `docs/pyfulmen_overview.md`: Module statuses, test counts, roadmap
- `docs/development/adr/README.md`: Ecosystem ADR adoption status levels
- `docs/development/adr/ecosystem-adoption-status.md`: Comprehensive tracking (new)

---

## üîß Implementation Fixes

### Test File Name Collision Fix

**Fixed**: Renamed pathfinder test file to avoid pytest collection errors

**Issue**: `tests/unit/pathfinder/test_models.py` collided with `tests/unit/foundry/test_models.py`, causing pytest to fail with "imported module 'test_models' has this **file** attribute" error.

**Location**: `tests/unit/pathfinder/`

**Before**: `test_models.py`
**After**: `test_pathfinder_models.py`

**Impact**: Clean test collection, no ambiguity in test module naming

### Version Test Update

**Updated**: Basic version test to reflect v0.1.3

**Location**: `tests/test_basic.py`

**Before**: `assert pyfulmen.__version__ == "0.1.2"`
**After**: `assert pyfulmen.__version__ == "0.1.3"`

---

## üìä Quality Metrics

### Test Coverage

- **Pathfinder Tests**: 47 tests, all passing
- **ASCII Tests**: 48 tests, all passing
- **Total Tests**: 615 tests, all passing (+95 tests from v0.1.2)
- **Coverage**: 90%+ maintained across all modules

### Code Quality

- ‚úÖ Ruff linting: All checks passing
- ‚úÖ Ruff formatting: Code formatted consistently
- ‚úÖ Type hints: Full type coverage maintained
- ‚úÖ Documentation: Complete and validated

### Cross-Language Parity

- ‚úÖ Pathfinder API: 100% gofulmen pathfinder parity
- ‚úÖ ASCII API: 100% gofulmen ASCII implementation alignment
- ‚úÖ Foundation Models: Consistent Pydantic patterns

---

## üöÄ Getting Started

### Pathfinder Usage

```python
from pyfulmen.pathfinder import Finder, FindQuery

# Create finder with default configuration
finder = Finder()

# Find Python files excluding tests
query = FindQuery(
    root="/path/to/project",
    include=["**/*.py"],
    exclude=["**/test_*.py", "**/__pycache__/**"],
    max_depth=5,
    include_hidden=False
)

results = finder.find_files(query)

for result in results:
    print(f"Found: {result.relative_path}")
    print(f"  Source: {result.source_path}")
    print(f"  Logical: {result.logical_path}")

# Convenience methods
go_files = finder.find_go_files(root="/path/to/project")
config_files = finder.find_config_files(root="/path/to/project")
schema_files = finder.find_schema_files(root="/path/to/project")
```

### ASCII Helpers Usage

```python
from pyfulmen.ascii import (
    string_width,
    pad_right,
    pad_left,
    pad_center,
    truncate,
    draw_box,
    BoxStyle,
    get_terminal_config
)

# Calculate Unicode-aware width
width = string_width("Hello ‰∏ñÁïå")  # Accounts for double-width characters
width = string_width("Box: ‚îå‚îÄ‚îê")    # Accounts for box drawing

# Padding operations
padded = pad_right("Hello", 20)    # "Hello               "
padded = pad_left("World", 20)     # "               World"
padded = pad_center("Title", 20)   # "       Title        "

# Truncation with ellipsis
text = truncate("Very long text here", max_width=15, ellipsis="...")
# Output: "Very long te..."

# Box drawing
box = draw_box(
    width=40,
    height=10,
    style=BoxStyle.SINGLE,
    title="Status Report",
    content=[
        "System: OK",
        "Database: Connected",
        "API: Running"
    ]
)
print(box)

# Terminal detection
terminal_config = get_terminal_config()
if terminal_config:
    print(f"Terminal: {terminal_config.terminal_name}")
    print(f"Overrides: {len(terminal_config.overrides)} characters")
```

### Terminal Override Configuration

```bash
# Create user terminal overrides (optional)
mkdir -p ~/.config/fulmen
cat > ~/.config/fulmen/terminal-overrides.yaml <<EOF
profiles:
  - terminalType: "vscode"
    terminalName: "Visual Studio Code - Custom"
    overrides:
      "‚îÄ": 1
      "‚îÇ": 1
      "‚îå": 1
      "‚îê": 1
      "‚îî": 1
      "‚îò": 1
EOF
```

---

## üìù Known Limitations

### Pathfinder

- **Context Support**: No context cancellation support yet (Python context managers for async/cancel not yet implemented)
- **Caching**: Cache functionality disabled by default (performance sufficient without it)

### ASCII Helpers

- **BYOC Layer**: Layer 3 (Bring Your Own Config) runtime API not yet exposed
- **Additional Formatters**: Tables and progress bars not yet implemented (box drawing only)

### General

- **Windows Testing**: Best-effort Windows support, primarily tested on macOS/Linux
- **Performance Benchmarks**: Baseline performance metrics not yet established

---

## üîÑ Migration Guide

### From v0.1.2 to v0.1.3

**No breaking changes** - this release is fully backward compatible.

### New Features

1. **Pathfinder Module**: New extension module for filesystem discovery

   ```python
   # New functionality in v0.1.3
   from pyfulmen.pathfinder import Finder, FindQuery

   finder = Finder()
   results = finder.find_files(FindQuery(
       root="/path/to/search",
       include=["**/*.py"]
   ))
   ```

2. **ASCII Helpers Module**: New extension module for console formatting

   ```python
   # New functionality in v0.1.3
   from pyfulmen.ascii import string_width, draw_box, BoxStyle

   width = string_width("Hello ‰∏ñÁïå")
   box = draw_box(width=30, height=5, style=BoxStyle.SINGLE)
   ```

3. **Ecosystem ADR Tracking**: New documentation for architectural alignment
   - See `docs/development/adr/ecosystem-adoption-status.md`
   - All ecosystem ADRs now tracked with adoption status levels

### Dependencies

**New Dependency**: `wcwidth>=0.2.0`

```bash
# If installing from source, wcwidth is included automatically
pip install pyfulmen

# Or update existing installation
pip install --upgrade pyfulmen
```

---

## ü§ù Contributors

**Generated by**: PyFulmen Architect (@pyfulmen-architect) using [Claude Code](https://claude.ai/code)
**Supervised by**: @3leapsdave (Dave Thompson)
**Agentic Attribution**: All commits follow FulmenHQ agentic attribution standards

---

## üìö Additional Resources

- **Repository**: [pyfulmen](https://github.com/fulmenhq/pyfulmen) (internal)
- **Pathfinder Documentation**: `src/pyfulmen/pathfinder/README.md`
- **ASCII Documentation**: `src/pyfulmen/ascii/README.md`
- **ADR Adoption Status**: `docs/development/adr/ecosystem-adoption-status.md`
- **ADR Index**: `docs/development/adr/README.md`
- **Standards**: `docs/crucible-py/standards/` for FulmenHQ ecosystem standards
- **Maintainers**: See `MAINTAINERS.md` for project governance

---

## üéØ Next Steps

### v0.2.0 (Planned - Q1 2026)

Enterprise observability and performance:

- Enhanced correlation ID propagation (HTTP headers, gRPC metadata)
- Tracing integration (OpenTelemetry compatibility)
- External sink support (HTTP/HTTPS log shipping)
- Performance optimizations for high-throughput logging
- Async logging support for high-throughput services

### v0.3.0+ (Future)

Extended ecosystem utilities:

- Cloud storage helpers (S3/GCS/Azure)
- Metrics and tracing modules (full observability stack)
- Enhanced CLI tooling integration
- Performance benchmarks and optimization
- Additional ASCII formatters (tables, progress bars)

---

**Release**: v0.1.3
**Date**: October 17, 2025
**Status**: ‚úÖ Released
